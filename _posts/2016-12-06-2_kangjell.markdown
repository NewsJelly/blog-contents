---
layout: post
title:  "강젤리의 태블로 활용기 #6 이동경로 맵 그리기 -2"
date:   2016-12-06 10:44:25
categories: injell feature
tags: featured
image: /assets/article_images/2014-11-30-mediator_features/night-track.JPG
image2: /assets/article_images/2014-11-30-mediator_features/night-track-mobile.JPG
---

지난번 [이동경로 맵 그리기 첫번째 포스팅](http://newsjelly.github.io/blog-contents/injell/feature/2016/12/06/1-kangjell.html)에 이어서, 이번 포스팅에서는 이동경로 맵의 두번째 유형을 그리는 방법에 대해서 알아보자!

![이동경로 맵의 두번째 유형 ](https://cloud.githubusercontent.com/assets/10662638/20955650/33db1e96-bc88-11e6-9203-ac2d1df1f74d.png)

이동경로 맵의 두번째 유형은 2개 이상의 지점이 하나의 선으로 연결되어 이동경로를 표현한 것으로, 첫 번째 유형(한 지점을 기준으로 해 다른 여러 지점을 연결)을 시각화 하는 방법을 응용하면 된다.

해당 시각화를 위해서는 아래와 같은 테이블 구조의 데이터가 필요하다.

![샘플데이터](https://cloud.githubusercontent.com/assets/10662638/20955722/bf5ed4da-bc88-11e6-8f34-2144b019160b.png)

일단 각 위치별 좌표(위도, 경도) 정보를 가지고 있어야 한다. 샘플 데이터의 '노선_count' 필드를 보면 '1'로 표기된 행이 출발하는 지점을 의미하며 그 외 숫자는 순서대로 이동하는 지점의 위치를 의미한다. 즉 샘플 데이터로 표현하고자 하는 시각화 형태는 '노선_count' 필드의 '1'부터 '5'까지 각 지점이 하나의 선으로 연결되는 것이다.

![지도 위에 각 좌표 찍기](https://cloud.githubusercontent.com/assets/10662638/20956352/a39d40ac-bc8c-11e6-9f8c-167a6327e972.png)

태블로 실행 후 데이터 원본을 불러온 뒤, '위도', '경도' 필드는 데이터 속성으로 '지리적 역할'의 '위도/경도'를 설정 한다. 워크시트에서 '경도' 필드는 '열'영역으로 '위도' 필드는 '행' 영역으로 이동시킨 뒤 각각의 필드 옵션을 '차원'으로 설정한다. 이 경우 지도의 각 위치에 원 모양의 symbol이 나타나는 것을 확인할 수 있다.

![각 좌표를 라인으로 잇기](https://cloud.githubusercontent.com/assets/10662638/20956074/06a1a992-bc8b-11e6-969d-a43537891b66.png)

이제 각 지점을 라인으로 잇기 위해서 marks 영역에서 차트 유형을 line으로 변경한다. 또한 각 지점의 순서대로 선이 연결될 수 있도록 path 영역에 '노선_count' 필드를 이동시킨다. 순서대로 지점이 하나의 선으로 연결된 것을 확인할 수 있다. 만약 동시에 여러 개의 선을 만들고 싶다면, '노선명' 필드를 marks 영역의 color 혹은 빈 공간에 이동시켜 놓으면 된다.

![이동경로에 수치 반영하기](https://cloud.githubusercontent.com/assets/10662638/20956298/585b4fee-bc8c-11e6-8292-cfd22f3dad91.png)

마지막으로 특정 수치 값에 해당하는 필드를 marks 영역의 color 영역과 size 영역으로 이동시켜서 수치 값을 반영한 이동경로 맵을 완성할 수 있다.
