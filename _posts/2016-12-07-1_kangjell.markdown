---
layout: post
title:  "강젤리의 태블로 활용기 #7 '계산된 변수 만들기' 기능 활용하기 -1"
date:   2016-12-07 10:44:25
categories: injell feature
tags: featured
image: /assets/article_images/2014-11-30-mediator_features/night-track.JPG
image2: /assets/article_images/2014-11-30-mediator_features/night-track-mobile.JPG
---

태블로는 원본 데이터 필드 그대로만 활용하여 시각화 할 수 있다?! 아니다! 이번 포스팅에는 원본 데이터 상의 여러 개의 필드를 활용하여 사용자가 원하는 계산식의 변수를 만드는 방법을 알아보고자 한다. 이와 같은 기능을 사용하면 원본 데이터에는 변수로 존재하지 않으나, 새로운 변수를 만들 수 있으며 이를 활용해 다양한 시각화가 가능하다.

'계산된 변수 만들기' 기능을 설명하기 위해 샘플 데이터를 준비했다.

![샘플 데이터](https://cloud.githubusercontent.com/assets/10662638/20994810/210fcb64-bd36-11e6-9074-8841a8e95b68.png)

샘플 데이터는 각 위치별(ID) '위도/경도'의 좌표 정보를 가지고 있으며 수치에 해당하는 변수로 '기본값', '추가', '배수' 3가지가 포함되어 있다.

![지도시각화 하기](https://cloud.githubusercontent.com/assets/10662638/20994908/d24b48e0-bd36-11e6-8a7f-10ac12bf9e29.png)

이제 기본적으로 해당 샘플 데이터를 가지고 가장 기본적인 지도 시각화를 해보자! '경도' 필드를 '열' 영역으로, '위도' 필드를 '행' 영역으로 이동시키고, 각각의 옵션을 차원으로 변경시킨다. 지도 위 각 좌표에 원 모양의 symbol이 표시되는 것을 확인할 수 있다.

![각 좌표에 수치 반영하기](https://cloud.githubusercontent.com/assets/10662638/20994963/2aa390c4-bd37-11e6-8f53-92eb068f3e73.png)

나아가 각 좌표에 해당하는 수치를 반영하기 위해 '기본값'이라는 필드를 marks 영역의 size 영역으로 이동시켰다.

이제, 이번 포스팅에서 알아보기로 한 '계산된 변수 만들기' 기능을 본격적으로 시도해보자!

먼저 어떤 식의 '계산된 변수'를 만들 것인가에 대한 정의가 필요하다. 앞서 살펴보았던 샘플 데이터의 각 필드를 고려해서 '기본값'에 '추가' 필드의 값을 더하고 여기에 '배수' 필드의 값을 곱한 변수를 만들어 해당 변수를 사용한 지도 시각화를 그려보기로 하자.

![계산된 필드 만들기](https://cloud.githubusercontent.com/assets/10662638/20995100/10490172-bd38-11e6-8a3e-07f8be452cbd.png)

태블로 워크시트 화면에서 좌측의 변수들이 나열되어 있는 영역에서 마우스 우클릭을 한다. 우클릭 후 보여지는 옵션 가운데서 '계산된 필드 만들기'를 선택한다. 그 경우 계산된 필드를 만들 수 있는 팝업 창이 뜬다.

![계산된 필드 만들기](https://cloud.githubusercontent.com/assets/10662638/20995211/dc197318-bd38-11e6-8d0a-46f693750ced.png)

빈 팝업 창 상단에 새롭게 만들 필드 명(수식 반영 값)을 입력하고, 하단의 수식창에 보이는 것과 같이 직접 입력한다. 해당 수식창에서 '[ ]'의 의미는 필드를 의미하며, 필드명 일부를 입력할 경우 사용가능한 필드가 자동으로 보여지는 기능도 있다. 수식을 입력 후 오른쪽 하단의 '확인' 버튼을 클릭한다. 태블로 워크시트 작업 창의 왼쪽 영역에 '수식 반영 값'이라는 새로운 필드가 만들어 진 것을 확인할 수 있다.

![계산된 필드를 수치로 반영하기](https://cloud.githubusercontent.com/assets/10662638/20995336/a526f9b0-bd39-11e6-879c-c58a0a7e9d66.png)

동일한 지도 시각화에 '계산된 필드'(수치 반영 값)를 marks 영역의 size 영역으로 이동시켜 해당 필드를 시각화에 반영한다.

![지도 시각화 비교해보기](https://cloud.githubusercontent.com/assets/10662638/20995483/bc839dec-bd3a-11e6-9c89-d5ece6a591d1.png)

앞서 '기본값' 필드를 기준으로 만들었던 지도 시각화와 '계산된 필드'를 적용하여 만든 지도 시각화를 비교해보자. 일단각 지도의 범례의 수치 범위에 차이가 있음을 확인할 수 있다. 또한 각 위치별 수치값과 버블 크기를 비교해 '계산된 필드'가 적용된 시각화에 차이가 있음을 알 수 있다.
