---
layout: post
title:  "강젤리의 태블로 활용기 #6 이동경로 맵 그리기 -1"
date:   2016-12-06 10:34:25
categories: injell feature
tags: featured
image: /assets/article_images/2014-11-30-mediator_features/night-track.JPG
image2: /assets/article_images/2014-11-30-mediator_features/night-track-mobile.JPG
---

여행 일정별 루트, 버스 노선 등 이동경로를 태블로에서 시각화 할 수 있을까?
시각화 유형 중 맵 시각화를 응용하여 이동경로 데이터를 시각화 해보자!

태블로에서 기본적으로 할 수 있는 맵시각화는 filled map과 symbol map으로 지난 '강젤리의 태블로 활용기 #2 맵차트 그리기'에서 그 방법을 알아보았다.

![일반적인 지도시각화 유형](https://cloud.githubusercontent.com/assets/10662638/20953354/49d03856-bc76-11e6-986c-09998ff225bb.png)

filled map은 지도의 영역을 기준으로 데이터를 시각화 할 때 사용되며, symbol map은 지도의 특정 좌표를 기준으로 시각화 할 때 사용된다.

이번 포스팅에서 알아볼 이동경로 맵은 아래의 이미지 사례와 같이 지도 위 각 좌표를 선으로 연결하는 식으로 표현된다.

![이동경로 맵 시각화 사례](https://cloud.githubusercontent.com/assets/10662638/20953497/87aa6bc8-bc77-11e6-8ab9-c1f0edc5b4e4.png)

첫 번째 사례 유형은 한 지점을 기준으로 해 다른 여러 지점으로 선이 연결됨을 확인할 수 있다. 예를 들어 특정 지역의 인구가 타 지역으로 이동하는 것 혹은 특정 항구의 수출 물동량 현황 등 주제의 데이터시각화에서 활용될 수 있다. 두 번째 사례 유형은 2개 이상의 지점을 연결하여 경로를 표현한 것으로 볼 수 있다. 예를 들어 여행지의 루트, 버스 노선, 태풍의 이동경로 등 주제의 데이터시각화에서 활용될 수 있다.

이동경로 맵 시각화의 2가지 유형 중 첫 번째 유형을 만드는 방법을 이번 포스팅에서 알아보고, 다음 포스팅에서는 나머지 유형에 대해서 알아보고자 한다.

해당 시각화를 위해서는 아래와 같은 테이블 구조의 데이터가 필요하다.

![샘플 데이터](https://cloud.githubusercontent.com/assets/10662638/20953740/eba5ef34-bc78-11e6-85a5-9328b5943d09.png)

일단 각 위치별 좌표(위도, 경도) 정보를 가지고 있어야 한다. 샘플 데이터의 '노선_count' 필드를 보면 '1'로 표기된 행이 출발지를 의미하며, '2'로 표기된 행이 도착지를 의미한다. 또한 각각의 라인은 '노선명' 필드로 구분된다.

이제 준비된 샘플 데이터를 가지고 태블로로 시각화를 해보자!

![지도 위에 각 좌표 찍기](https://cloud.githubusercontent.com/assets/10662638/20953877/e1fd279e-bc79-11e6-8f56-30528b22764e.png)

태블로 실행 후 데이터 원본 불러온 뒤, '위도', '경도' 필드는 데이터 속성으로 '지리적 역할'의 '위도/경도' 설정을 해준다. 워크시트에서 '경도' 필드는 '열' 영역으로 '위도' 필드는 '행' 영역으로 이동시킨 뒤 각각의 필드 옵션을 '차원'으로 설정한다. 이 경우 지도의 각 위치에 원 모양의 symbol이 생긴 것을 확인할 수 있다.

![각 좌표를 라인으로 잇기](https://cloud.githubusercontent.com/assets/10662638/20953918/19af1670-bc7a-11e6-85b9-f36a5fb7d338.png)

이제 각 지점을 라인으로 잇기 위해서 marks 영역에서 차트 유형을 line으로 변경한다. 이 경우 좌표 위의 모든 점이 하나의 선으로 이어진다. 이제 한 지점에서 여러 지점으로 여러 개의 선을 그리기 위해 선을 구분하기 위한 데이터 필드로 '노선명' 필드를 marks 영역의 하단 빈공간에 끌어다 놓는다. 이미지와 같이 하나의 지점에서 여러 지점으로 개별 라인이 생긴 것을 확인할 수 있다.

![이동경로에 수치 반영하기](https://cloud.githubusercontent.com/assets/10662638/20954014/e09d0c4c-bc7a-11e6-92d5-fbf1c7079d7e.png)

나아가 특정 수치 값에 해당하는 필드를 marks 영역의 color 영역과 size 영역으로 이동시켜서 수치 값을 반영한 이동경로 맵을 완성 할 수 있다.

다음 포스팅에서 이동경로 맵 시각화의 두 번째 유형을 만드는 방법을 이어서 알아보자:)
